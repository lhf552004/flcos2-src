<div class="container-fluid d-flex flex-column">
  <div class="container">
    <h3>Profile</h3>
  </div>
</div>

<section>
  <div class="container">
    <div class="card-deck">
      <div class="card">
        <div class="card-body">
          <h5 class="card-text">Basic Info</h5>
          <mat-form-field hintLabel="Max 10 characters" appearance="fill">
            <mat-label>Enter Your Last Name</mat-label>
            <input matInput #lastName [(ngModel)]="currentUser.lastName" (input)="infoChanged()" maxlength="10" placeholder="Ex. Nougat">
            <mat-hint align="end">{{lastName.value?.length || 0}}/10</mat-hint>
          </mat-form-field>

          <mat-form-field hintLabel="Max 10 characters" appearance="fill">
            <mat-label>Enter Your First Name</mat-label>
            <input matInput #firstName [(ngModel)]="currentUser.firstName" (input)="infoChanged()" maxlength="10" placeholder="Ex. Nougat">
            <mat-hint align="end">{{firstName.value?.length || 0}}/10</mat-hint>
          </mat-form-field>

          <mat-form-field hintLabel="Max 10 characters" appearance="fill">
            <mat-label>Enter Your Email</mat-label>
            <input matInput #firstName [(ngModel)]="currentUser.email" (input)="infoChanged()" maxlength="10" placeholder="Ex. Nougat">
            <mat-hint align="end">{{firstName.value?.length || 0}}/10</mat-hint>
          </mat-form-field>

          <button [disabled]="!isInfoEdited" mat-button color="primary" (click)="save()">Save</button>
          <button mat-button color="primary" (click)="cancel()">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="container">
    <div class="card-deck">
      <div class="card">
        <div class="card-body">
          <h5 class="card-text">Change Password</h5>
          <form [formGroup]="formGroup">
            <mat-form-field>
              <input matInput type="password" [(ngModel)]="currentUser.password" [type]="hide ? 'password' : 'text'" placeholder="Password"
                     formControlName="password" (input)="onPasswordInput()">
              <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                      [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <mat-error *ngIf="password.hasError('required')">Password is required</mat-error>
              <mat-error *ngIf="password.hasError('minlength')">Password must have at least {{minPw}}characters
              </mat-error>
            </mat-form-field>

            <mat-form-field>
              <input matInput type="password" [type]="hide ? 'password' : 'text'" placeholder="Confirm password"
                     formControlName="password2" (input)="onPasswordInput()">
              <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                      [attr.aria-pressed]="hide">
                <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
              </button>
              <mat-error *ngIf="password2.hasError('required')">Please confirm your password</mat-error>
              <mat-error *ngIf="password2.invalid && !password2.hasError('required')">Passwords don't match</mat-error>
            </mat-form-field>
          </form>
          <button mat-button [disabled]="!isPasswordChanged" color="primary" (click)="changePassword()">Save</button>
          <button mat-button color="primary" (click)="cancel()">Cancel</button>
        </div>
      </div>
    </div>
  </div>
</section>
