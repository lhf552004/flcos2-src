{"version":3,"sources":["webpack:///src/app/workflow/route-resolvers/workflow-resolver.service.ts","webpack:///src/app/workflow/route-resolvers/workflows-resolver.service.ts","webpack:///src/app/workflow/shared/workflow.service.ts","webpack:///src/app/workflow/work-flow-designer/work-flow-designer.component.ts","webpack:///src/app/workflow/work-flow-designer/work-flow-designer.component.html","webpack:///src/app/workflow/workflow-default/workflow-default.component.ts","webpack:///src/app/workflow/workflow-default/workflow-default.component.html","webpack:///src/app/workflow/workflow-routing.module.ts","webpack:///src/app/workflow/workflow.module.ts","webpack:///src/app/workflow/workflows/workflows.component.ts","webpack:///src/app/workflow/workflows/workflows.component.html"],"names":["WorkflowResolverService","workflowService","router","route","state","id","paramMap","get","getWorkflow","providedIn","WorkflowsResolverService","getWorkflows","WorkflowService","workflows","name","vertexes","width","height","x","y","style","edges","source","target","find","w","WorkFlowDesignerComponent","faExpandArrowsAlt","faCaretUp","faCaretDown","hideScopeOfWork","unsubscribe","workflowSettings","isEdited","data","pipe","subscribe","workflow","root","mxCell","insert","model","mxGraphModel","graph","mxGraph","graphContainer","nativeElement","setConnectable","parent","getDefaultParent","beginUpdate","Map","forEach","vertexData","vertex","insertVertex","set","edgeData","has","insertEdge","endUpdate","mxHierarchicalLayout","execute","next","complete","selector","templateUrl","styleUrls","WorkflowDefaultComponent","routes","path","component","resolve","children","WorkflowRoutingModule","forChild","imports","exports","WorkflowModule","declarations","WorkflowsComponent","faSearch","filterSubject$","menuItems","map","icon","label"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASaA,uB;AAEX,uCAAoBC,eAApB,EAA8DC,MAA9D,EAA8E;AAAA;;AAA1D,aAAAD,eAAA,GAAAA,eAAA;AAA0C,aAAAC,MAAA,GAAAA,MAAA;AAAmB;;;;gCACzEC,K,EAA+BC,K,EAA0B;AAC/D,cAAMC,EAAE,GAAGF,KAAK,CAACG,QAAN,CAAeC,GAAf,CAAmB,YAAnB,CAAX;AACA,iBAAO,KAAKN,eAAL,CAAqBO,WAArB,CAAiCH,EAAjC,CAAP;AACD;;;;;;;uBANUL,uB,EAAuB,gI,EAAA,8G;AAAA,K;;;aAAvBA,uB;AAAuB,eAAvBA,uBAAuB,K;AAAA,kBAFtB;;;;;sEAEDA,uB,EAAuB;cAHnC,wDAGmC;eAHxB;AACVS,oBAAU,EAAE;AADF,S;AAGwB,Q;;;;;;;;;;;;;;;;;;;;;;;;ACTpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QASaC,wB;AAEX,wCAAoBT,eAApB,EAA8DC,MAA9D,EAA8E;AAAA;;AAA1D,aAAAD,eAAA,GAAAA,eAAA;AAA0C,aAAAC,MAAA,GAAAA,MAAA;AAAmB;;;;gCACzEC,K,EAA+BC,K,EAA0B;AAC/D,iBAAO,KAAKH,eAAL,CAAqBU,YAArB,EAAP;AACD;;;;;;;uBALUD,wB,EAAwB,gI,EAAA,8G;AAAA,K;;;aAAxBA,wB;AAAwB,eAAxBA,wBAAwB,K;AAAA,kBAFvB;;;;;sEAEDA,wB,EAAwB;cAHpC,wDAGoC;eAHzB;AACVD,oBAAU,EAAE;AADF,S;AAGyB,Q;;;;;;;;;;;;;;;;;;;;;;;;ACTrC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaG,e;AAkCX,iCAAc;AAAA;;AAjCd,aAAAC,SAAA,GAAwB,CAAC;AACvBR,YAAE,EAAE,GADmB;AAEvBS,cAAI,EAAE,cAFiB;AAGvBC,kBAAQ,EAAE,CACR;AACEV,cAAE,EAAE,GADN;AAEES,gBAAI,EAAE,KAFR;AAGEE,iBAAK,EAAE,GAHT;AAIEC,kBAAM,EAAE,EAJV;AAKEC,aAAC,EAAE,CALL;AAMEC,aAAC,EAAE,CANL;AAOEC,iBAAK,EAAE;AAPT,WADQ,EAUR;AACEf,cAAE,EAAE,GADN;AAEES,gBAAI,EAAE,MAFR;AAGEE,iBAAK,EAAE,GAHT;AAIEC,kBAAM,EAAE,EAJV;AAKEC,aAAC,EAAE,CALL;AAMEC,aAAC,EAAE,CANL;AAOEC,iBAAK,EAAE;AAPT,WAVQ,CAHa;AAuBvBC,eAAK,EAAE,CACL;AACEhB,cAAE,EAAE,GADN;AAEES,gBAAI,EAAE,EAFR;AAGEQ,kBAAM,EAAE,GAHV;AAIEC,kBAAM,EAAE,GAJV;AAKEH,iBAAK,EAAE;AALT,WADK;AAvBgB,SAAD,CAAxB;AAiCiB;;;;uCAEL;AACV,iBAAO,gDAAG,KAAKP,SAAR,CAAP;AACD;;;oCAEWR,E,EAAU;AACpB,iBAAO,gDAAG,KAAKQ,SAAL,CAAeW,IAAf,CAAoB,UAAAC,CAAC;AAAA,mBAAIA,CAAC,CAACpB,EAAF,KAASA,EAAb;AAAA,WAArB,CAAH,CAAP;AACD;;;;;;;uBA1CUO,e;AAAe,K;;;aAAfA,e;AAAe,eAAfA,eAAe,K;AAAA,kBAFd;;;;;sEAEDA,e,EAAe;cAH3B,wDAG2B;eAHhB;AACVH,oBAAU,EAAE;AADF,S;AAGgB,Q;;;;;;;;;;;;;;;;;;;;ACP5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACyBU;;AAAyG;AAAA;;AAAA;;AAAA;AAAA;;AAA2C;;;;;;AAA3I,6FAAoB,YAApB,EAAoB,IAApB;;;;;;;;AACT;;AAAwG;AAAA;;AAAA;;AAAA;AAAA;;AAA2C;;;;;;AAA1I,2FAAkB,YAAlB,EAAkB,IAAlB;;;;;;;;AAGb;;AACE;;AACE;;AACE;;AAAG;AAAA;;AAAA;;AAAA;AAAA;;AACD;;AAAmD;;AAAS;;AAC9D;;AAEF;;AACF;;AAEF;;MD1BN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;QAOaiB,yB;AAmBX,yCAAoBvB,KAApB,EAA2C;AAAA;;AAAvB,aAAAA,KAAA,GAAAA,KAAA;AAhBpB,aAAAwB,iBAAA,GAAoC,mFAApC;AACA,aAAAC,SAAA,GAA4B,2EAA5B;AACA,aAAAC,WAAA,GAA8B,6EAA9B;AAEA,aAAAC,eAAA,GAAkB,KAAlB,CAY2C,CAH3C;;AACA,aAAAC,WAAA,GAA6B,IAAI,4CAAJ,EAA7B;AAE8C;;;;mCAEtC;AAAA;;AACN,eAAKC,gBAAL,GAAwB,IAAI,uGAAJ,EAAxB;AACA,eAAKA,gBAAL,CAAsBC,QAAtB,GAAiC,IAAjC;AACA,eAAK9B,KAAL,CAAW+B,IAAX,CAAgBC,IAAhB,CAAqB,iEAAU,KAAKJ,WAAf,CAArB,EAAkDK,SAAlD,CAA4D,UAACF,IAAD,EAAgC;AAC1F,iBAAI,CAACG,QAAL,GAAgBH,IAAI,CAACG,QAArB;AACD,WAFD;AAGD;;;0CAEc;AAAA;;AACb,cAAMC,IAAI,GAAG,IAAIC,MAAJ,EAAb;AACAD,cAAI,CAACE,MAAL,CAAY,IAAID,MAAJ,EAAZ;AAEA,eAAKE,KAAL,GAAa,IAAIC,YAAJ,CAAiBJ,IAAjB,CAAb,CAJa,CAKb;;AACA,eAAKK,KAAL,GAAa,IAAIC,OAAJ,CAAY,KAAKC,cAAL,CAAoBC,aAAhC,EAA+C,KAAKL,KAApD,CAAb;AACA,eAAKE,KAAL,CAAWI,cAAX,CAA0B,IAA1B;AACA,cAAMC,MAAM,GAAG,KAAKL,KAAL,CAAWM,gBAAX,EAAf;;AACA,cAAI;AACF,iBAAKR,KAAL,CAAWS,WAAX;AACA,gBAAMnC,QAAQ,GAAG,IAAIoC,GAAJ,EAAjB;AACA,iBAAKd,QAAL,CAActB,QAAd,CAAuBqC,OAAvB,CAA+B,UAAAC,UAAU,EAAI;AAC3C,kBAAMC,MAAM,GAAG,MAAI,CAACX,KAAL,CAAWY,YAAX,CAAwBP,MAAxB,EAAgCK,UAAU,CAAChD,EAA3C,EAA+CgD,UAAU,CAACvC,IAA1D,EACbuC,UAAU,CAACnC,CADE,EACCmC,UAAU,CAAClC,CADZ,EACekC,UAAU,CAACrC,KAD1B,EACiCqC,UAAU,CAACpC,MAD5C,CAAf;;AAEAF,sBAAQ,CAACyC,GAAT,CAAaH,UAAU,CAAChD,EAAxB,EAA4BiD,MAA5B;AACD,aAJD;AAKA,iBAAKjB,QAAL,CAAchB,KAAd,CAAoB+B,OAApB,CAA4B,UAAAK,QAAQ,EAAI;AACtC,kBAAMnC,MAAM,GAAGP,QAAQ,CAAC2C,GAAT,CAAaD,QAAQ,CAACnC,MAAtB,IAAgCP,QAAQ,CAACR,GAAT,CAAakD,QAAQ,CAACnC,MAAtB,CAAhC,GAAgE,IAA/E;AACA,kBAAMC,MAAM,GAAGR,QAAQ,CAAC2C,GAAT,CAAaD,QAAQ,CAAClC,MAAtB,IAAgCR,QAAQ,CAACR,GAAT,CAAakD,QAAQ,CAAClC,MAAtB,CAAhC,GAAgE,IAA/E;;AACA,oBAAI,CAACoB,KAAL,CAAWgB,UAAX,CAAsBX,MAAtB,EAA8BS,QAAQ,CAACpD,EAAvC,EAA2CoD,QAAQ,CAAC3C,IAApD,EAA0DQ,MAA1D,EAAkEC,MAAlE;AACD,aAJD;AAMD,WAdD,SAcU;AACR,iBAAKkB,KAAL,CAAWmB,SAAX;AACA,gBAAIC,oBAAJ,CAAyB,KAAKlB,KAA9B,EAAqCmB,OAArC,CAA6C,KAAKnB,KAAL,CAAWM,gBAAX,EAA7C;AACD;AACF;;;uCAEc;AACb,cAAMD,MAAM,GAAG,KAAKL,KAAL,CAAWM,gBAAX,EAAf;;AACA,cAAI;AACF,iBAAKR,KAAL,CAAWS,WAAX;AACA,gBAAMI,MAAM,GAAG,KAAKX,KAAL,CAAWY,YAAX,CAAwBP,MAAxB,EAAgC,KAAhC,EAAuC,MAAvC,EACb,GADa,EACR,GADQ,EACH,GADG,EACE,EADF,CAAf;AAGD,WALD,SAKU;AACR,iBAAKP,KAAL,CAAWmB,SAAX;AACD;AACF;;;sCAEa;AACZ,eAAK7B,WAAL,CAAiBgC,IAAjB;AACA,eAAKhC,WAAL,CAAiBiC,QAAjB;AACD;;;;;;;uBAzEUtC,yB,EAAyB,+H;AAAA,K;;;YAAzBA,yB;AAAyB,8C;AAAA;AAAA;;;;;;;;;;;;;;;AC3BtC;;AACE;;AACE;;AACE;;AAAI;;AAAS;;AACf;;AACA;;AACE;;AACE;;AACE;;AAA+D;;AAAK;;AACpE;;AAA+D;;AAAM;;AACvE;;AACA;;AACE;;AACA;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACF;;AACA;;AACE;;AACA;;AACF;;AACF;;AACA;;AAWF;;AACA;;AACE;;AACF;;AACA;;AAGF;;AACF;;;;AAvBwC;;AAAA;;AACF;;AAAA;;AAGlB;;AAAA;;;;;;;;;sEDFPA,yB,EAAyB;cALrC,uDAKqC;eAL3B;AACTuC,kBAAQ,EAAE,yBADD;AAETC,qBAAW,EAAE,qCAFJ;AAGTC,mBAAS,EAAE,CAAC,qCAAD;AAHF,S;AAK2B,Q;;;;;;gBACnC,uD;iBAAU,gB;;;;;;;;;;;;;;;;;;;;AE5Bb;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAOaC,wB;AAEX,0CAAc;AAAA;AAAG;;;;mCAET,CACP;;;;;;;uBALUA,wB;AAAwB,K;;;YAAxBA,wB;AAAwB,4C;AAAA,c;AAAA,a;AAAA;AAAA;ACPrC;;AAAG;;AAAuB;;;;;;;;sEDObA,wB,EAAwB;cALpC,uDAKoC;eAL1B;AACTH,kBAAQ,EAAE,uBADD;AAETC,qBAAW,EAAE,mCAFJ;AAGTC,mBAAS,EAAE,CAAC,mCAAD;AAHF,S;AAK0B,Q;;;;;;;;;;;;;;;;;;;;AEPrC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AASA,QAAME,MAAM,GAAW,CACrB;AAACC,UAAI,EAAE,EAAP;AAAWC,eAAS,EAAE,iFAAtB;AAA0CC,aAAO,EAAE;AAAC3D,iBAAS,EAAE;AAAZ,OAAnD;AAA0F4D,cAAQ,EAAE,CAChG;AAACH,YAAI,EAAE,aAAP;AAAsBE,eAAO,EAAE;AAACnC,kBAAQ,EAAE;AAAX,SAA/B;AAAoEkC,iBAAS,EAAE;AAA/E,OADgG,EAEhG;AAAED,YAAI,EAAE,EAAR;AAAYC,iBAAS,EAAE;AAAvB,OAFgG;AAApG,KADqB,CAAvB;;QAWaG,qB;;;;;YAAAA;;;;yBAAAA,qB;AAAqB,O;AAAA,gBAHvB,CAAC,6DAAaC,QAAb,CAAsBN,MAAtB,CAAD,CAGuB,EAFtB,4DAEsB;;;;0HAArBK,qB,EAAqB;AAAA;AAAA,kBAFtB,4DAEsB;AAAA,O;AAFV,K;;;;;sEAEXA,qB,EAAqB;cAJjC,sDAIiC;eAJxB;AACRE,iBAAO,EAAE,CAAC,6DAAaD,QAAb,CAAsBN,MAAtB,CAAD,CADD;AAERQ,iBAAO,EAAE,CAAC,4DAAD;AAFD,S;AAIwB,Q;;;;;;;;;;;;;;;;;;ACpBlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAgBaC,c;;;;;YAAAA;;;;yBAAAA,c;AAAc,O;AAAA,gBANhB,CACP,kEADO,EAEP,8EAFO,EAGP,oEAHO,CAMgB;;;;0HAAdA,c,EAAc;AAAA,uBAPV,0GAOU,EAPiB,iFAOjB,EAPqC,qGAOrC;AAP6D,kBAEpF,kEAFoF,EAGpF,8EAHoF,EAIpF,oEAJoF;AAO7D,O;AAHV,K;;;;;sEAGJA,c,EAAc;cAR1B,sDAQ0B;eARjB;AACRC,sBAAY,EAAE,CAAC,0GAAD,EAA4B,iFAA5B,EAAgD,qGAAhD,CADN;AAERH,iBAAO,EAAE,CACP,kEADO,EAEP,8EAFO,EAGP,oEAHO;AAFD,S;AAQiB,Q;;;;;;;;;;;;;;;;;;AChB3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAcaI,kB;AAcX,kCAAoB7E,KAApB,EAA2C;AAAA;;AAAvB,aAAAA,KAAA,GAAAA,KAAA,CAAuB,CAb3C;;AACA,aAAA8E,QAAA,GAA2B,0EAA3B,CAY2C,CAN3C;;AACA,aAAAC,cAAA,GAAkC,IAAI,4CAAJ,EAAlC,CAK2C,CAH3C;;AACA,aAAAnD,WAAA,GAA6B,IAAI,4CAAJ,EAA7B;AAE8C;;;;mCAEtC;AAAA;;AACN,eAAK5B,KAAL,CAAW+B,IAAX,CAAgBC,IAAhB,CAAqB,iEAAU,KAAKJ,WAAf,CAArB,EAAkDK,SAAlD,CAA4D,UAACF,IAAD,EAAmC;AAC7F,kBAAI,CAACrB,SAAL,GAAiBqB,IAAI,CAACrB,SAAtB;AACA,kBAAI,CAACsE,SAAL,GAAiBjD,IAAI,CAACrB,SAAL,CAAeuE,GAAf,CAAmB,UAAA3D,CAAC;AAAA,qBAAK;AACxCpB,kBAAE,EAAEoB,CAAC,CAACpB,EADkC;AAExCgF,oBAAI,EAAE,gFAFkC;AAGxCC,qBAAK,EAAE7D,CAAC,CAACX,IAH+B;AAIxCX,qBAAK,EAAE,CAACsB,CAAC,CAACpB,EAAH,CAJiC;AAKxCoE,wBAAQ,EAAE;AAL8B,eAAL;AAAA,aAApB,CAAjB;AAOD,WATD;AAUD;;;sCAEa;AACZ,eAAK1C,WAAL,CAAiBgC,IAAjB;AACA,eAAKhC,WAAL,CAAiBiC,QAAjB;AACD;;;;;;;uBAhCUgB,kB,EAAkB,+H;AAAA,K;;;YAAlBA,kB;AAAkB,qC;AAAA,c;AAAA,a;AAAA,0N;AAAA;AAAA;ACd/B;;AACE;;AACE;;AAEA;;AACE;;AACF;;AAEF;;AACF;;;;AAPwE;;AAAA,yFAAqB,WAArB,EAAqB,aAArB;;;;;;;;;sEDY3DA,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACTf,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,4BAFJ;AAGTC,mBAAS,EAAE,CAAC,4BAAD;AAHF,S;AAKoB,Q","file":"workflow-workflow-module-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport {ActivatedRouteSnapshot, Router, RouterStateSnapshot} from '@angular/router';\nimport {Observable} from 'rxjs';\nimport {WorkflowService} from '../shared/workflow.service';\nimport {Workflow} from '../../shared/workflow/models/workflow.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WorkflowResolverService {\n\n  constructor(private workflowService: WorkflowService, private router: Router) { }\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<Workflow> {\n    const id = route.paramMap.get('workflowId');\n    return this.workflowService.getWorkflow(id);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {ActivatedRouteSnapshot, Router, RouterStateSnapshot} from '@angular/router';\nimport {Observable} from 'rxjs';\nimport {WorkflowService} from '../shared/workflow.service';\nimport {Workflow} from '../../shared/workflow/models/workflow.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WorkflowsResolverService {\n\n  constructor(private workflowService: WorkflowService, private router: Router) { }\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<Workflow[]> {\n    return this.workflowService.getWorkflows();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { Workflow } from 'src/app/shared/workflow/models/workflow.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WorkflowService {\n  workflows: Workflow[] = [{\n    id: '1',\n    name: 'standard run',\n    vertexes: [\n      {\n        id: '1',\n        name: '入涂装',\n        width: 200,\n        height: 80,\n        x: 0,\n        y: 0,\n        style: ''\n      },\n      {\n        id: '2',\n        name: 'PVC线',\n        width: 200,\n        height: 80,\n        x: 0,\n        y: 0,\n        style: ''\n      },\n    ],\n    edges: [\n      {\n        id: '1',\n        name: '',\n        source: '1',\n        target: '2',\n        style: ''\n      }\n    ]\n  }];\n  constructor() { }\n\n  getWorkflows(): Observable<Workflow[]> {\n    return of(this.workflows);\n  }\n\n  getWorkflow(id: string): Observable<Workflow> {\n    return of(this.workflows.find(w => w.id === id));\n  }\n}\n","import {AfterViewInit, Component, ElementRef, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport { Vertex } from 'src/app/shared/workflow/models/vertex.model';\r\nimport { WorkflowSettings } from 'src/app/shared/workflow/models/workflow-settings.model';\r\nimport {Workflow} from '../../shared/workflow/models/workflow.model';\r\nimport {takeUntil} from 'rxjs/operators';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {Subject} from 'rxjs';\r\nimport {IconDefinition, faExpandArrowsAlt, faCaretUp, faCaretDown} from '@fortawesome/free-solid-svg-icons';\r\n\r\ndeclare var mxGraph: any;\r\ndeclare var mxCell: any;\r\ndeclare var mxGraphModel: any;\r\ndeclare var mxHierarchicalLayout: any;\r\n// declare var mxConstants: any;\r\n// declare var mxEvent: any;\r\n// declare var mxGeometry: any;\r\n// declare var mxGraphView: any;\r\n// declare var mxMouseEvent: any;\r\n// declare var mxRectangle: any;\r\n// declare var mxUtils: any;\r\n// declare var mxPoint: any;\r\n\r\n@Component({\r\n  selector: 'emes-work-flow-designer',\r\n  templateUrl: './work-flow-designer.component.html',\r\n  styleUrls: ['./work-flow-designer.component.scss']\r\n})\r\nexport class WorkFlowDesignerComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('graphContainer') graphContainer: ElementRef | undefined;\r\n\r\n  faExpandArrowsAlt: IconDefinition = faExpandArrowsAlt;\r\n  faCaretUp: IconDefinition = faCaretUp;\r\n  faCaretDown: IconDefinition = faCaretDown;\r\n\r\n  hideScopeOfWork = false;\r\n\r\n  workflow: Workflow;\r\n\r\n  graph: any;\r\n\r\n  model: any;\r\n\r\n  workflowSettings: WorkflowSettings;\r\n  // Used for cleaning subscription\r\n  unsubscribe: Subject<void> = new Subject();\r\n\r\n  constructor(private route: ActivatedRoute) { }\r\n\r\n  ngOnInit(): void {\r\n    this.workflowSettings = new WorkflowSettings();\r\n    this.workflowSettings.isEdited = true;\r\n    this.route.data.pipe(takeUntil(this.unsubscribe)).subscribe((data: {workflow: Workflow}) => {\r\n      this.workflow = data.workflow;\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    const root = new mxCell();\r\n    root.insert(new mxCell());\r\n\r\n    this.model = new mxGraphModel(root);\r\n    // @ts-ignore\r\n    this.graph = new mxGraph(this.graphContainer.nativeElement, this.model);\r\n    this.graph.setConnectable(true);\r\n    const parent = this.graph.getDefaultParent();\r\n    try {\r\n      this.model.beginUpdate();\r\n      const vertexes = new Map();\r\n      this.workflow.vertexes.forEach(vertexData => {\r\n        const vertex = this.graph.insertVertex(parent, vertexData.id, vertexData.name,\r\n          vertexData.x, vertexData.y, vertexData.width, vertexData.height);\r\n        vertexes.set(vertexData.id, vertex);\r\n      });\r\n      this.workflow.edges.forEach(edgeData => {\r\n        const source = vertexes.has(edgeData.source) ? vertexes.get(edgeData.source) : null;\r\n        const target = vertexes.has(edgeData.target) ? vertexes.get(edgeData.target) : null;\r\n        this.graph.insertEdge(parent, edgeData.id, edgeData.name, source, target);\r\n      });\r\n\r\n    } finally {\r\n      this.model.endUpdate();\r\n      new mxHierarchicalLayout(this.graph).execute(this.graph.getDefaultParent());\r\n    }\r\n  }\r\n\r\n  addRectangle() {\r\n    const parent = this.graph.getDefaultParent();\r\n    try {\r\n      this.model.beginUpdate();\r\n      const vertex = this.graph.insertVertex(parent, '222', 'Test',\r\n        100, 100, 200, 80);\r\n\r\n    } finally {\r\n      this.model.endUpdate();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.unsubscribe.next();\r\n    this.unsubscribe.complete();\r\n  }\r\n}\r\n","<div class=\"container-fluid d-flex flex-column flex-fill\">\r\n  <div class=\"row justify-content-between align-items-center pt-3 pb-2 mb-3 border-bottom\">\r\n    <div class=\"col\">\r\n      <h2>YZ Mod. A</h2>\r\n    </div>\r\n    <div class=\"col-auto\">\r\n      <div class=\"btn-toolbar mb-2 mb-md-0\">\r\n        <div class=\"btn-group mr-2\">\r\n          <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\">Share</button>\r\n          <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\">Export</button>\r\n        </div>\r\n        <button type=\"button\" class=\"btn btn-sm btn-outline-secondary dropdown-toggle\">\r\n          <span data-feather=\"calendar\"></span>\r\n          This week\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"row flex-fill\">\r\n    <div #sidebarGraphContainer class=\"col geSidebarContainer\">\r\n      <div class=\"row border-bottom justify-content-between no-args no-gutters mt-3\">\r\n        <div class=\"col-auto font-weight-bold\">\r\n          Normal Process flow\r\n        </div>\r\n        <div class=\"col\">\r\n          <fa-icon [icon]=\"faCaretDown\" *ngIf=\"hideScopeOfWork\" [fixedWidth]=\"true\" class=\"gray-text pointer pr-0\" (click)=\"hideScopeOfWork=!hideScopeOfWork\"></fa-icon>\r\n          <fa-icon [icon]=\"faCaretUp\" *ngIf=\"!hideScopeOfWork\" [fixedWidth]=\"true\" class=\"gray-text pointer pr-0\" (click)=\"hideScopeOfWork=!hideScopeOfWork\"></fa-icon>\r\n        </div>\r\n      </div>\r\n      <ng-container *ngIf=\"!hideScopeOfWork\">\r\n        <div class=\"row mt-3\">\r\n          <div class=\"col font-weight-bold\">\r\n            <i (click)=\"addRectangle()\">\r\n              <mat-icon class=\"pointer\" style=\"font-size: 100px\">crop_16_9</mat-icon>\r\n            </i>\r\n\r\n          </div>\r\n        </div>\r\n\r\n      </ng-container>\r\n    </div>\r\n    <div class=\"col geDiagramContainer geDiagramBackdrop\">\r\n      <div #graphContainer id=\"graphContainer\"></div>\r\n    </div>\r\n    <div class=\"col\">\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n<!--<emes-work-flow [workflowSettings]=\"workflowSettings\"></emes-work-flow>-->\r\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'emes-workflow-default',\n  templateUrl: './workflow-default.component.html',\n  styleUrls: ['./workflow-default.component.scss']\n})\nexport class WorkflowDefaultComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>workflow-default works!</p>\n","import {NgModule} from '@angular/core';\r\nimport {Routes, RouterModule} from '@angular/router';\r\n\r\nimport {WorkFlowDesignerComponent} from './work-flow-designer/work-flow-designer.component';\r\nimport {WorkflowsComponent} from './workflows/workflows.component';\r\nimport {WorkflowsResolverService} from './route-resolvers/workflows-resolver.service';\r\nimport {WorkflowResolverService} from './route-resolvers/workflow-resolver.service';\r\nimport {WorkflowDefaultComponent} from './workflow-default/workflow-default.component';\r\n\r\nconst routes: Routes = [\r\n  {path: '', component: WorkflowsComponent, resolve: {workflows: WorkflowsResolverService}, children: [\r\n      {path: ':workflowId', resolve: {workflow: WorkflowResolverService}, component: WorkFlowDesignerComponent},\r\n      { path: '', component: WorkflowDefaultComponent }\r\n    ]},\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class WorkflowRoutingModule {\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { WorkflowRoutingModule } from './workflow-routing.module';\r\nimport { WorkFlowDesignerComponent } from './work-flow-designer/work-flow-designer.component';\r\nimport { WorkflowsComponent } from './workflows/workflows.component';\r\nimport { WorkflowDefaultComponent } from './workflow-default/workflow-default.component';\r\nimport {MatIconModule} from '@angular/material/icon';\r\n\r\n@NgModule({\r\n  declarations: [WorkFlowDesignerComponent, WorkflowsComponent, WorkflowDefaultComponent],\r\n  imports: [\r\n    SharedModule,\r\n    WorkflowRoutingModule,\r\n    MatIconModule\r\n  ]\r\n})\r\nexport class WorkflowModule { }\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {takeUntil} from 'rxjs/operators';\nimport {ActivatedRoute} from '@angular/router';\nimport {Subject} from 'rxjs';\nimport {Workflow} from '../../shared/workflow/models/workflow.model';\nimport {faSearch, IconDefinition} from '@fortawesome/free-solid-svg-icons';\nimport {MenuItem} from '../../shared/side-bar/models/menu-items.model';\nimport {faProductHunt} from '@fortawesome/free-brands-svg-icons';\n\n@Component({\n  selector: 'emes-workflows',\n  templateUrl: './workflows.component.html',\n  styleUrls: ['./workflows.component.scss']\n})\nexport class WorkflowsComponent implements OnInit, OnDestroy {\n  // Icons\n  faSearch: IconDefinition = faSearch;\n\n  menuItems: MenuItem[];\n\n  workflows: Workflow[];\n\n  // Holds filter text\n  filterSubject$: Subject<string> = new Subject<string>();\n\n  // Used for cleaning subscription\n  unsubscribe: Subject<void> = new Subject();\n\n  constructor(private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    this.route.data.pipe(takeUntil(this.unsubscribe)).subscribe((data: {workflows: Workflow[]}) => {\n      this.workflows = data.workflows;\n      this.menuItems = data.workflows.map(w => ({\n        id: w.id,\n        icon: faProductHunt,\n        label: w.name,\n        route: [w.id],\n        children: []\n      }));\n    });\n  }\n\n  ngOnDestroy() {\n    this.unsubscribe.next();\n    this.unsubscribe.complete();\n  }\n\n}\n","<div class=\"container-fluid h-100 px-0\">\n  <div class=\"row h-100 no-gutters\">\n    <emes-side-bar class=\"col-md-3 col-lg-2 d-none d-md-block bg-light\" [header]=\"'Workflow'\" [menuItems]=\"menuItems\"></emes-side-bar>\n\n    <main class=\"col d-flex flex-column\">\n      <router-outlet></router-outlet>\n    </main>\n\n  </div>\n</div>\n"]}